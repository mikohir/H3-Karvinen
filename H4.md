# H4 Uusi komento

Neljäs kotitehtävä Karvisen [palvelinten hallinta](https://terokarvinen.com/2021/configuration-management-systems-palvelinten-hallinta-ict4tn022-spring-2021/#h3-versionhallinta) -kurssilta.

### a) Hei komento! Tee järjestelmään uusi "hei maailma" -komento ja asenna se orjille Saltilla. Liitä raporttiisi 'ls -l /usr/local/bin/' tulosteesta ainakin se rivi, jolla näkyy uuden komentotiedostosi oikeudet. Vinkkejä: tee shell script, joka tulostaa "hei maailma". Kokeile ensin käsin, sitten automatisoi. Luonteva paikka paketinhallinnan ulkopuolelta asennetuille ohjelmille on /usr/local/bin/. Katso myös 'salt-call --local sys.state_doc file.managed'. Muista (aina ja kaikessa mitä teet tietokoneella) testata lopputulos. Hyvä testi on mahdollisimman lähellä sitä, mitä käyttäjä tekisi.
 
Loin /home/master/scripts kansiooni uuden heimaailma.sh tiedoston. Tässä sen sisältämä skripti ja toimivuuden testaus:

![image](https://user-images.githubusercontent.com/82265726/115955614-520b7e00-a500-11eb-8189-98d31707a793.png)
![image](https://user-images.githubusercontent.com/82265726/115955200-d6a8cd00-a4fd-11eb-900b-ed9b64173ded.png)

Seuraavaksi muutin tiedoston oikeudet niin, että muu kuin pääkäyttäjä ei voi muokata (kirjoittaa) tiedostoa. Tähän käytin komentoa "sudo chmod 755 heimaailma.sh", jonka jälkeen kopioin tiedoston /usr/local/bin kansioon tulevaa automatisointia varten. Tässä vielä kuva tiedoston oikeuksista, jota tehtävänannossa pyydettiin: 

![image](https://user-images.githubusercontent.com/82265726/115955761-45d3f080-a501-11eb-9ef7-6b7b3c0e57ac.png)

Tämän jälkeen kopioin heimaailma -komennon salt kansioon, sekä loin init.sls tiedoston, jolla automatisointi tapahtuu. Tässä init.sls sisältö: 

![image](https://user-images.githubusercontent.com/82265726/115957559-d9aaba00-a50b-11eb-971e-9f6483e4d1ea.png)


Suomeksi sanottuna tiedosto siis tekee orjille heimaailma -komennon, sekä muuttaa sen oikeudet samanlaisiksi, mitä ne olivat aiemmin käsin tekemässäni "manuaalissa" versiossa. Seuraavaksi vuorossa testaus. Herra -orja asetelma on samalla virtuaalikoneella, joten poistan vain heimaailma -komennon ja sen jälkeen ajan äsken tekemäni tilan komennon asentamiseksi ja viimeisenä kokeilen toimiiko komento.

Komennon poisto:
![image](https://user-images.githubusercontent.com/82265726/115957144-7ae44100-a509-11eb-9448-c2a6d4d4114a.png)

Tilan ajo komennon asentamiseksi:
![image](https://user-images.githubusercontent.com/82265726/115957603-1eceec00-a50c-11eb-838d-8b40bd307e7c.png)


Toimivuuden testaus:
![image](https://user-images.githubusercontent.com/82265726/115957656-69e8ff00-a50c-11eb-8c41-dbbc1c037ea3.png)

Tekemäni tila näyttää toimivan ja maailmalle toivotetaan terveiset haluttuun tapaan. Myös oikeudet muuttuivat oikeanlaisiksi:

![image](https://user-images.githubusercontent.com/82265726/115957835-6c982400-a50d-11eb-86f1-53eb7e784b51.png)






### b) whatsup.sh. Tee järjestelmään uusi komento, joka kertoo ajankohtaisia tietoja; asenna se orjille. Vinkkejä: Voit näyttää valintasi mukaan esimerkiksi päivämäärää, säätä, tietoja koneesta, verkon tilanteesta...

### c) hello.py. Tee järjestelmään uusi komento Pythonilla ja asenna se orjille. Vinkkejä: Hei maailma riittää, mutta propellihatut saavat toki koodaillakin. Shebang on "#!/usr/bin/python3". Helpoin Python-komento on: print("Hei Tero!")

### d) Laiskaa skriptailua. Tee kansio, josta jokainen skripti kopioituu orjille. Vinkki: 'salt-call --local sys.state_doc file.recurse'. Kun tämä on valmis, on todella helppoa laittaa orjille mikä tahansa yhden tiedoston shell script, Python-ohjelma, Perl-ohjelma, Go-binääri tai muu yhden binäärin ohjelma.

### e) Intel. Etsi kolme loppuprojektia joltain vanhalta kurssitoteutukselta. Kuvaile projektit tiiviisti ja linkitä alkuperäiseeen raporttin. Vinkkejä: Loppuprojekteja löydät etsimällä opiskelijoiden raportteja vanhoilta kursseilta ja selailemalla sivuja, joilta ne löytyivät. Raportteja löytyy vanhojen kurssitotetusten kommenteista. Ja tietysti kannattaa silmäillä listaa sieltä täältä, niin näet eri projektit kuin muut. Voi hakea myös Googlella ja DuckDuckGolla.

### f) Lukua, ei luottamusta. Kokeile yhtä kohdassa d-Intel löytämääsi modulia koneella. Tämä on infraa koodina, joten luottamusta ei tarvita. Voit lukea koodista, mitä olet ajamassa.
